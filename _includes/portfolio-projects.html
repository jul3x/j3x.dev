<div class="projects-wrapper">
    {% for project in include.projects %}
    <div class="project" id="project-{{ include.id }}-{{ forloop.index }}" onclick="openModal('{{ include.id }}', {{ forloop.index }})">
        <div class="project-img {{ include.id }}-img" style="background-image: url('/assets/img/{{ project.img }}');"></div>
        <div class="project-short">
            <span class="date italic">{{ project.date | date: "%Y-%m-%d" }}</span>
            <h4 class="name">{{ project.name }}</h4>
            <p>{{ project.short }}</p>

            <div style="display:none" class="description">{{project.content}}</div>
        </div>
    </div>
    {% endfor %}
</div>

<script type="text/javascript">
    /** Parallax effect on imgs */
    document.addEventListener("mousemove", parallax);

    function parallax(event) {
        this.querySelectorAll(".{{ include.id }}-img").forEach((img) => {
            const position = 10;
            const x = (window.innerWidth - event.clientX * position) / 500;
            const y = (window.innerHeight - event.clientY * position) / 500;

            img.style.backgroundPositionX = x + 'px';
            img.style.backgroundPositionY = y + 'px';
        });
    }
</script>
